## 4. 테스트 구축하기

리팩터링은 가치있는 도구이지만, 제대로 활용하려면 실수를 잡아주는 견고한 **테스트 스위트**가 필요하다.

*리팩터링을 꼭하지 않더라도 테스트 코드 작성은 필요하다. 전체적인 개발효율을 높여준다.*

### 4.1 자가 테스트 코드의 가치

실상 프로그래머는 코드를 짜는 시간은 얼마 되지 않는다.

읽거나 고민하는 시간이 훨씬 더 많다.

사실 버그를 해결하는 것은 금방 해결되지만 가장 끔찍한 것은 **버그를 찾는 과정**이다.

이런 과정에서 사이드 이펙트가 발생하여 다른 버그를 양산할 수 있다..

테스트 코드를 직접 작성하고 이를 하나씩 확인하는 과정에서 지금의 Junits나 NUnit 같은 테스트 프레임워크가 탄생하게 되었다.

> 모든 테스트를 완전히 자동화하고 그 결과까기 스스로 검사하게 만들자

테스트를 작성하기 가장 좋은 시간은 **프로그래밍을 시작하기 전**이다.

예를 들어 기능을 추가하기 전에 테스트부터 작성한다면, 원하는 기능을 추가하기 위해 무엇이 필요한지 고민하게 된다.

**구현보다 인터페이스에 집중**하게 된다는 장점이 있다.

또한 테스트 코드가 작성되어 있다면 작업이 완료되는 시점을 정확하게 판단할 수 있다.(테스트가 다 통과한 시점)

이게 조금 더 극단적으로 가면 **테스트 주도 개발(TDD)**이다.

*이후 TDD관련 책을 읽어도 좋을 것 같다는 생각*

### 4.2 테스트할 샘플 코드

이 코드도 1장에서 내가 `C#`으로 변경해서 작업한 것과 같이 내 입맛에 맞춰서 실습해 볼 예정이다.

비즈니스 로직 코드는 클래스 두 개로 구성되며, 하나는 생산자를 표현하는 Producer이고, 다른 하나는 지역 전체를 표현하는 Province이다.

*마찬가지로 json import과정을 생략하고 main에서 객체로 넣는 방식을 채택*

```csharp
public class Producer
{
    public string Name { get; set; }
    public int Cost { get; set; }
    public int Production { get; set; }
}

public class Province
{
    public string Name { get; set; }
    public string Producers { get; set; }
    public int TotalProduction { get; set; }
    public int TotalProfit { get; set; }
}
```