## 9장 단위 테스트

TDD란, 테스트가 주도하는 개발이다.

서비스를 제작하기전 테스트를 먼저 만들고, 테스트를 통과하는 코드를 작성하는 것이다.

이런 플로우를 가지게 되면 이후에 구현부가 수정되어 세부동작이 달라져도 테스트만 통과한다면 시스템 자체의 문제가 없어지게 된다.

예제에선 테스트코드가 없는 개발이 불러올 수 있는 문제점을 보여준다.

현재의 개발추세는 애자일과 TDD덕택에 단위 테스트를 자동화하는 프로그래머가 많아졌다.

CI/CD, 데브옵스와 같이 게임쪽에서도 젠킨스 GameCI가 주목받고 있다.

### TDD 법칙 세 가지

1. 실패하는 단위 테스트를 작성할 때까지 실제 코드를 작성하지 않는다.
2. 컴파일은 실패하지 않으면서 실행이 실패하는 정도로만 단위 테스트를 작성한다.
3. 현재 실패하는 테스트를 통과할 정도로만 실제 코드를 작성한다.

위 세가지 규칙을 따르면 개발과 테스트가 대략 30초 주기로 묶인다.

아직 테스트코드를 주도적으로 짜본 경험이 없어서 이 세가지 법칙에 대해 감이 안집히는 것 같다.  

웹 상에서도 게임 개발에 TDD를 사용하는 예제가 적다보니 더욱 멀게 느껴진다.

### 깨끗한 테스트 코드 유지하기

역설적이게도 실제 코드베이스의 코드가 변경되면서 테스트 코드 마찬가지로 도메인이 원하는 형태로 변경되어야 한다.

그렇다면 테스트 코드도 앞서 다룬 유지보수를 위한 가독성 좋은 코드를 짜야한다는 결론이 나온다.

이 이야기에서 주는 교훈은 더러운 테스트 코드는 안짜는 것보다 못하다는 결론이다.

깨끗한 테스트 코드를 유지하기 위해선 코드 자체를 작고, 한가지 기능만 할 수 있도록 짜야한다.

> 테스트 코드는 실제 코드 못지 않게 중요하다.

*테스트는 유연성, 유지보수성, 재사용성을 제공한다.*

이런 이점을 제공하는 것은 테스트 코드의 큰 이점이다.